{% extends "layouts/private.twig" %}

{% block title %}CARRITO
{% endblock %}

{% block style %}{% endblock %}

{% block content %}

	<!-- cart -->
	<br>
	<div class="cart-section mt-150 mb-150">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 col-md-12  border rounded">
					<div class="cart-table-wrap">
						<table class="table">
							<thead class="table">
								<tr class="table-head-row">
									<th class="product-image">Producto
									</th>
									<th class="product-name">Precio</th>
									<th class="product-price">Cantidad</th>
								</tr>
							</thead>
							<tbody>
								{# Mostrar cada elemento de mi carrito como una fila  #}
								{% set total = 0 %}
								{% for i in carrito %}
									<tr class="table-head-row">
										{% for u in productos %}
											{% if i.producto_id == u.id %}
												<td>{{ u.nombre }}
												</td>
											{% endif %}
										{% endfor %}
										<td class="product-name">{{ i.precio }}
											€</td>
										<td class="product-price">{{ i.cantidad }}</td>
										{% set total = total + (i.precio * i.cantidad) %}
									</tr>
								{% endfor %}
							</tbody>
						</table>
						<br>

						<input type="button" class="btn btn-dark" value="Actualizar carrito">
					</form>
					<a href="{{ URL }}?controller=carrito&action=deleteAll">
						<input type="button" class="btn btn-dark" value="Eliminar productos">
					</a>
					<a href="{{ URL }}?controller=pedidos&action=save">
						<input type="button" class="btn btn-dark" value="Finalizar compra">
					</a>
				</div>
			</div>

			<div class="col-lg-4  border rounded">
				<div class="total-section">
					<table class="table">
						<thead class="total-table-head">
							<tr class="table-total-row">
								<th>Tipo</th>
								<th>Precio</th>
							</tr>
						</thead>
						<tbody>
							<tr class="table-total-row">
								<th>Total articulos</th>
								<th>{{ total }}</th>
							</tr>
							<tr class="table-total-row">
								<th>Envio</th>
								<th>10€</th>
							</tr>
							<tr class="table-total-row">
								<th>Total</th>
								<th>{{ total + 10 }}€</th>
							</tr>
						</tbody>
					</table>
					<div class="cart-buttons"></div>
				</div>
			</div>
		</div>
	</div>
	<br>
</div>
<!-- end cart -->{% endblock %}{% block script %}{% endblock %}
